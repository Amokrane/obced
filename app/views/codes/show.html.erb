<!-- http://daringfireball.net/projects/markdown/syntax -->
<!-- http://github.github.com/github-flavored-markdown/ -->

<script type="text/javascript" src="http://platform.twitter.com/widgets.js">
</script>
 <!-- post entry -->   
<div class="code">  

    <div class="code-title">
        <h2><a href="#"><%= @code.title %></a></h2>
        <h3>By <a href="#"><%= @code.user.nickname %></a></h3>
    </div>

    <div class="code-meta">
    Friday, <span class="blue">April 2, 2010</span> // <a href="#"><strong> <%= @code.language %> </strong></a>
    </div>

    <div class="code-entry">

        <div class="code-box">
            <div id="voting">
                <div class="upvote">
                    <!-- @Ghislaine:  The style should be applied to the button instead, no? -->
                    <%= button_to "", code_vote_up_path(:code_id => @code.id), :html => {:class => ""} %>
                </div>

                <span><%= @code.score %></span>
                <div class="downvote">
                    <%= button_to "", code_vote_down_path(:code_id => @code.id), :html => {:class => ""} %>
                </div>
            </div><!-- end-voting -->

            <div class="code-box-content">
                <pre>
                    <%= sanitize Kramdown::Document.new(@code.content).to_html %>
                    <code> </code>
                </pre>
            </div>
        </div><!-- end-code-box -->

    <p> 
        <%= @code.description %>
    </p>

    <div class="clear"></div>

    </div><!-- end-code-entry -->

    <div class="code-meta-bot">
        <a href="post.html" class="link-comments"><%= @comments.count unless @comments.nil? %></a>
    </div>

</div>
<!--/ post entry -->

<!-- comments -->        

<div class="comment-list">
<a href="#addcomment" class="btn-more alignright">Add comment</a>
<h2>Comments</h2>

<% if !@comments.nil? %>
    <% @comments.each do |comment| %>
        <div class="comment-one">
            <div class="comment-box">
                <div class="comment-meta">
                    <strong class="author"><%= comment.user.nickname %> </strong>  <br/>
                    <span class="comment-date"><%= comment.created_at %> </span>    
                </div>

                <div class="comment-text">
                    <p> <%= comment.content %> </p>
                </div>
            </div>
        </div>
    <% end %>
<% else %>
    <div class="comment-text">
        <p> <%= "No comments posted yet" %> </p>
    </div>
<% end %>


<!-- comment form -->           
 <div class="comment-form" id="addcomment">
<h2>Add Comment:</h2>

<%= form_for([@code, @code.comments.build]) do |f| %>
    <p class="textarea"> <%= f.text_area :content, :html => {:cols => "40", :rows => "10"} %> </p>
    <p class="btn-send"> <%= f.submit "Send Message" %> </p>
<% end %>

<!--
<form action="" method="get">
<p class="inputtext"><input name="your-name" size="40" type="text" value="enter your name" onfocus="if (this.value == 'enter your name') {this.value = '';}" onblur="if (this.value == '') {this.value = 'enter your name';}" /></p>
<p class="inputtext"><input name="your-email" class="inputtext" size="40" type="text" value="enter your email" onfocus="if (this.value == 'enter your email') {this.value = '';}" onblur="if (this.value == '') {this.value = 'enter your email';}" /></p>
<div class="clear"></div>
<p class="textarea"><textarea name="your-message" cols="40" rows="10"></textarea></p>
<p class="btn-send">
<input value="Send Message" type="submit" /> 
</p>
</form>
-->

<div class="clear"></div>
</div>  

<!--/ comment form -->                                

